\documentclass[12pt,a4paper]{scrartcl}

\author{Sebastian Hirnschall}
%% (C) Hirnschall Sebastian 2016 
\date{\today}


\usepackage[
backend=biber,
style=authoryear-icomp,    % Zitierstil
isbn=false,                % ISBN nicht anzeigen, gleiches geht mit nahezu allen anderen Feldern
pagetracker=true,          % ebd. bei wiederholten Angaben (false=ausgeschaltet, page=Seite, spread=Doppelseite, true=automatisch)
maxbibnames=50,            % maximale Namen, die im Literaturverzeichnis angezeigt werden (ich wollte alle)
maxcitenames=3,            % maximale Namen, die im Text angezeigt werden, ab 4 wird u.a. nach den ersten Autor angezeigt
autocite=inline,           % regelt Aussehen für \autocite (inline=\parancite)
block=space,               % kleiner horizontaler Platz zwischen den Feldern
backref=true,              % Seiten anzeigen, auf denen die Referenz vorkommt
backrefstyle=three+,       % fasst Seiten zusammen, z.B. S. 2f, 6ff, 7-10
date=short                % Datumsformat
]{biblatex}

\addbibresource{./refs.bib}

\usepackage{longtable}
%\usepackage{hyperref}
\usepackage{amsmath}% http://ctan.org/pkg/amsmath
\usepackage[ngerman]{cleveref} %referenzen fur Abbildungen
\usepackage{graphicx}
\usepackage{listings}
\usepackage{esdiff}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{geometry}% http://ctan.org/pkg/geometry
\usepackage{amsthm}
\usepackage{tocloft}
\usepackage{framed}
\usepackage{mathtools}
\usepackage{color}
\usepackage{multirow}
\usepackage{textcomp}
\usepackage{float}
%\usepackage[dvipsnames]{xcolor}


\usepackage[table,xcdraw,dvipsnames]{xcolor}

\usepackage{fancyvrb}


%\pagestyle{headings}

\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}

%\pagestyle{headings}

\usepackage{fancyhdr}
\pagestyle{fancy}
%
\rhead{ \rightmark}
%\rhead[re]{\textbf{\nouppercase{\leftmark}}}
\chead{}
\lhead{}
%%
\lfoot{Sebastian Hirnschall}
\cfoot{}
\rfoot{\thepage}
%%
\renewcommand{\headrulewidth}{0.2pt}
\renewcommand{\footrulewidth}{0.2pt}
\newcommand{\R}{\mathbb{R}}

\fancypagestyle{sh}
{
	\fancyhf{}
	\rhead{}
	%\rhead[re]{\textbf{\nouppercase{\leftmark}}}
	\chead{}
	\lhead{}
	\lfoot{ Sebastian Hirnschall}
	\cfoot{}
	\rfoot{\thepage}
}

\fancypagestyle{rd}
{
	\fancyhf{}
	\rhead{}
	%\rhead[re]{\textbf{\nouppercase{\leftmark}}}
	\chead{}
	\lhead{}
	\lfoot{ Rafael Dorigo}
	\cfoot{}
	\rfoot{\thepage}
}

\fancypagestyle{general}
{
	\fancyhf{}
	\rhead{}
	%\rhead[re]{\textbf{\nouppercase{\leftmark}}}
	\chead{}
	\lhead{}
	\lfoot{ Rafael Dorigo, Sebastian Hirnschall}
	\cfoot{}
	\rfoot{\thepage}
}




%listings settings
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{BackgroundGray}{rgb}{0.9,0.9,0.9}

\lstset{ %
	backgroundcolor=\color{BackgroundGray},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
	basicstyle=\footnotesize,        % the size of the fonts that are used for the code
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
	breaklines=true,                 % sets automatic line breaking
	captionpos=b,                    % sets the caption-position to bottom
	commentstyle=\color{mygreen},    % comment style
	deletekeywords={...},            % if you want to delete keywords from the given language
	escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
	frame=single,	                   % adds a frame around the code
	keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
	keywordstyle=\color{blue},       % keyword style
	language=C,                 	   % the language of the code
	otherkeywords={*,...},           % if you want to add more keywords to the set
	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
	numbersep=5pt,                   % how far the line-numbers are from the code
	numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
	rulecolor=\color{mygray},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
	stringstyle=\color{mymauve},     % string literal style
	tabsize=2,	                   % sets default tabsize to 2 spaces
	title=\lstname,                   % show the filename of files included with \lstinputlisting; also try caption instead of title
	emph={int,unsigned,long,vector,char,string},
	emphstyle={\color{ForestGreen}}
}

\Crefname{lstlisting}{Listing}{Listing}


%italic quotes
\newenvironment{italicquotes}
{\begin{quote}\itshape}
	{\end{quote}}


%tableofcontents font
%\renewcommand{\cftchapfont}{\scshape}
\renewcommand{\cftsecfont}{\bfseries}
\addtokomafont{disposition}{\rmfamily}

\newcommand{\spar}{\par\vspace{10pt}\noindent}
\newcommand{\Mod}[1]{\ (\text{mod}\ #1)}


\usepackage{twoopt}
\newcommandtwoopt{\img}[4][0.5cm][0.7]{
	\begin{figure}[!h]
		\vspace{#1}
		\centering
		\includegraphics[width=#2\textwidth]{#3}
		\caption{#4} %\footnotemark}
		\label{fig:#3}
	\end{figure}
	%\footnotetext{#5}
}




\numberwithin{equation}{section} 
%\makeatletter
%\@addtoreset{equation}{section}
%\makeatother



%\newtheorem{theorem}{Theorem}[section]
%\newtheorem{lemma}[theorem]{Lemma}
%\newtheorem{proposition}[theorem]{Proposition}
%\newtheorem{corollary}[theorem]{Corollary}

\newcounter{myalgctr}

\newenvironment{mydef}{%      define a custom environment
	\par\noindent%         create a vertical offset to previous material
	\refstepcounter{myalgctr}% increment the environment's counter
	\textsc{\textbf{Definition} \themyalgctr}% or \textbf, \textit, ...
	\newline
}{\par\bigskip}  %          create a vertical offset to following material
\numberwithin{myalgctr}{section}

\crefname{myalgctr}{Definition}{Definitionen}

%theorem
\newcounter{mytheoremctr}

\newenvironment{mytheorem}{%      define a custom environment
	\refstepcounter{mylemmactr}% increment the environment's counter
	\refstepcounter{mykorollarctr}
	\refstepcounter{mybeispielctr}% increment the environment's counter
	\refstepcounter{mytheoremctr}
	\par \noindent%         create a vertical offset to previous material
	\textsc{\textbf{Satz} \themytheoremctr}% or \textbf, \textit, ...
	\newline\noindent
}{\par\bigskip}  %          create a vertical offset to following material
\numberwithin{mytheoremctr}{section}

\crefname{mytheoremctr}{Satz}{Satz}

%korollar
\newcounter{mykorollarctr}

\newenvironment{mykorollar}{%      define a custom environment
	\refstepcounter{mylemmactr}% increment the environment's counter
	\refstepcounter{mytheoremctr}
	\refstepcounter{mybeispielctr}% increment the environment's counter
	\refstepcounter{mykorollarctr}
	\par\noindent%         create a vertical offset to previous material
	\textsc{\textbf{Korollar} \themykorollarctr}% or \textbf, \textit, ...
	\newline\noindent
}{\par\bigskip}  %          create a vertical offset to following material
\numberwithin{mykorollarctr}{section}

\crefname{mykorollarctr}{Korollar}{Korollar}

%lemma
\newcounter{mylemmactr}

\newenvironment{mylemma}{%      define a custom environment
	\refstepcounter{mykorollarctr}
	\refstepcounter{mytheoremctr}
	\refstepcounter{mybeispielctr}% increment the environment's counter
	\refstepcounter{mylemmactr}% increment the environment's counter
	\par\noindent%         create a vertical offset to previous material
	\textsc{\textbf{Lemma} \themylemmactr}% or \textbf, \textit, ...
	\newline\noindent
}{\par\bigskip}  %          create a vertical offset to following material
\numberwithin{mylemmactr}{section}

\crefname{mylemmactr}{Lemma}{Lemma}

\newcounter{mybeispielctr}

%beispiel
\newenvironment{mybeispiel}{%      define a custom environment
	\refstepcounter{mykorollarctr}
	\refstepcounter{mytheoremctr}
	\refstepcounter{mylemmactr}% increment the environment's counter
	\refstepcounter{mybeispielctr}% increment the environment's counter
	\par\noindent%         create a vertical offset to previous material
	\textsc{\textbf{Beispiel} \themybeispielctr}% or \textbf, \textit, ...
	\newline\noindent
}{\par\bigskip}  %          create a vertical offset to following material
\numberwithin{mybeispielctr}{section}

\crefname{mybeispielctr}{Beispiel}{Beispiel}

\newenvironment{myproof}{%      define a custom environment
	\bigskip\noindent%         create a vertical offset to previous material
	\textsc{\textbf{\\Beweis}}% or \textbf, \textit, ...
	\indent
}{\qed\par\bigskip}  %          create a vertical offset to following material


\newcommand{\mpar}[1]{\paragraph*{#1}\mbox{}\par}
\newcommand\norm[1]{\left\lVert#1\right\rVert}


\begin{document}
	\tableofcontents
	\thispagestyle{general}
	\newpage

	\noindent
	Um exponentiell abfallende Funktionen auf dem unbeschränkten Intervall [0,$\infty$) zu integrieren, bieten sich zwei Möglichkeiten an
	\begin{itemize}		
	\item[a)] 	Abschneiden des unbeschränkten Intervalls und Anwendung einer Quadraturformel für ein beschränktes Intervall [0,T] für T > 0
	\item[b)] 	Anwendung einer Gaußquadratur für die Gewichtsfunktion w(x) = exp(-x) 
	\end{itemize}
	\section{Abschneiden eines Intervalls}
	\begin{mylemma}
	Sei $f$ : [0,$\infty$) $\rightarrow$ $\R$ eine beschränkte Funktion. Desweiteren definieren wir für eine Menge M $\subset$ [0,$\infty$) das gewichtete Integral von $f$ mit
	\begin{align*}
		Q_M(f) := \int_{M}^{}{f(x)exp(-x)dx}
	\end{align*}
	Das Integral $Q_{[0,\infty)}(f)$ kann man approximieren, indem man für ein T > 0 das Integral auf dem beschränkten Intervall $Q_{[0,T)}(f)$ durch die summierte Trapezformel $Q_{h,T}(f)$ berechnet. Es folgt eine Fehlerabschätzung der Form 
	\begin{align*}
		|Q_{[0,\infty)}(f) - Q_{h,T}(f)| \le C_1\varepsilon_T + C_2T\varepsilon_h 
	\end{align*}
	wobei die Terme $\varepsilon_T, \varepsilon_h$ lediglich von $T$ bzw. $h$ abhängen und $C_1, C_2$ jeweils von $T,h$ unabhängig sind. Desweiteren wir vorausgesetzt, dass f hinreichend glatt ist und die Supremumsnorm der zweiten Ableitung der Funktion beschränkt ist.
	\end{mylemma}
	\begin{myproof}
		Mit \autocite[vgl.][40-41]{skript}: \\
		und $C_1 := \norm{f}_{\infty}$ , \quad $\varepsilon_T := e^{-T}$ ,
		\quad $C_2 := \norm{f^{''}}_{\infty}$ , \quad $\varepsilon_h := \frac{h^{2}}{12}$ folgt unmittelbar
		\begin{align*}
			|Q_{[0,\infty)}(f) - Q_{h,T}(f)| &\le |Q_{[0,\infty)}(f) - Q_{[0,T]}(f)| + |Q_{[0,T]}(f) - Q_{h,T}(f)| \\
			&= |Q_{(T,\infty)}(f)| + |Q_{[0,T)}(f) - Q_{h,T}(f)| \\
			&\le \norm{f}_{\infty}\int_{T}^{\infty}{e^{-x} dx} + \left|-\frac{T}{12}h^{2}f^{''}(\xi)\right| \\
			&= C_1e^{-T} + T\frac{h^{2}}{12}|f^{''}(\xi)| \\
			& \le C_1\varepsilon_T + \norm{f^{''}}_{\infty}T\frac{h^{2}}{12} \\
			& = C_1\varepsilon_T + C_2T\varepsilon_h 
		\end{align*}
	\end{myproof}
	\newpage
	\begin{mybeispiel}
		Der Fehlerterm wurde in Python eingegeben und geplottet. \\
		Es wurde n = 1000 gewählt und T $\in [1,100]$ mit der Funktion $f(x) := \frac{sin(x)}{x}$
		\lstinputlisting[language=Python, firstline = 4, caption=Implementierung des Fehlers]{aufgabeb.py}
		\begin{figure}[H]
			\begin{center}
				\includegraphics[width=0.85\textwidth]{Fehlerplot.png}
			\end{center}
			\caption{Fehlerplot in Abhängigkeit von fixen Funktionsauswertungen.}
			\label{fig:fehlerplot}	
		\end{figure}
		
		\textbf{Bemerkung}: Um das exakte Integral zu bestimmen, müsste T $\rightarrow \infty$ und h $\rightarrow 0$. Wir wollen numerisch integrieren, d.h. der Fehler wird beliebig klein. Aus Lemma 1.1 und \cref{fig:fehlerplot} ist nun offensichtlich bemerkbar, falls die Anzahl an Funktionsauswertungen steigt, auch T größer gewählt werden kann, jedoch T <= Anzahl der Funktionsauswertungen, damit der Fehler immer noch klein bleibt. Für eine fixe Anzahl an Funktionsauswertungen, kann T so gewählt werden, damit der Fehler minimal ist, indem man die erste Ableitung nach T in Lemma 1.1 bildet und die gleich 0 setzt. Für die Lösung $T_0$ gilt, die zweite Ableitung an der Stelle $T_0 > 0$, d.h. ein Minimum befindet sich an der Stelle. 
	\end{mybeispiel}
	\newpage

	\section{b}
	
	
	
	%sebastians teil
	\newpage
	\section{c}
	Zun\"achst  sei Bemerkt, dass\autocite[45]{skript}:
	\begin{mykorollar}\label{4.15}
		Es existiert eine eindeutig bestimmte Folge $(q_n)$ von Polynomen der Form
		\begin{align*}
		q_0(x)&\coloneqq 1\\
			q_n(x)&\coloneqq x^n+r_{n-1}(x),\quad x\in [a,b]
		\end{align*}
		mit $r_{n-1}\in \prod_{n-1}$, die die Orthogonalith\"atsbeziehungen  $(q_n,q_m)_w=0,\; n\neq m $ erf\"ullen.
	\end{mykorollar}

	\noindent und
	\begin{mylemma}
		Jedes der orthogonalen Polynome $q_n\in \prod_n$, aus \cref{4.15} besitzt $n$ einfache Nullstellen in $(a,b)$.
	\end{mylemma}

	\noindent Woraus sich dann folgender Satz ergibt:
	\begin{mytheorem}\label{aufgabec-satz}
		%Korollar 4.15  \autocite[45]{skript}
		Die Orthogonalpolynome $q_n \in \prod_n$ aus \cref{4.15} sind eindeutig durch die folgenden 3 Terme gegeben
		\begin{align*}
			q_0(x) &\coloneqq 1\\
			q_1(x) &\coloneqq (x-\beta_0) q_0 = x-\beta_0 \\
			 q_{n+1}(x) &\coloneqq (x-\beta_n)q_n(x)-\gamma^2_n q_{n-1}(x) \quad \text{f\"ur}  \quad n\geq 1
		\end{align*}
		mit
		\begin{align*}
			\beta_n\coloneqq \frac{(xq_n,q_n)_w}{\norm{q_n}^2_w} \quad \text{und} \quad 
			\gamma_n\coloneqq \frac{\norm{q_n}_w}{\norm{q_{n-1}}_w}
		\end{align*}
		Weiter sind die Eigenwerte der Matrix
		\begin{align*}
		T\coloneqq 
			\begin{pmatrix}
			\beta_0 		 & 	\gamma_1 	&  						& &\\
			\gamma_1 	 & \beta_1 			& \gamma_2	  & & \\
			 				    	&  \gamma_2   & \ddots 		      & \ddots &\\
			 				    	&					& \ddots &	\beta_{n-1} & \gamma_n\\
			 				    	&	&	&\gamma_n &\beta_n&\\
			\end{pmatrix}
			\in \mathbb{R}^{(n+1)\times (n+1)}
		\end{align*}
		die Nullstellen $x_0,\dots ,x_n$ des $(n+1)$-ten Orthogonalpolynoms $q_{n+1}$ und die zugeh\"origen Gewichte der Gau\ss-Quadratur sind gegeben durch
		\begin{align*}
			\alpha_j \coloneqq \left(\frac{(v_j)_1}{\norm{v_j}_2}\right)^2 \int_{a}^{b} w(x)dx,\quad j=0,\dots,n
		\end{align*}
		wobei $(v_j)_1$ die 1.Komponente eines Eigenvektors $v_j \in \mathbb{R}^{n+1}\setminus \{0\}$ zum eigenwert $x_j$ ist.
	\end{mytheorem}
	\begin{myproof}
		
	\end{myproof}
	\newpage
	Somit ist also die in \Cref{aufgabed-code} zu sehende Vorgehensweise gerechtfertigt.
	\lstinputlisting[language=c,firstline=9,lastline=18,label={aufgabed-code},caption={M\"ogliche Implementierung von \cref{aufgabec-satz}}]{../code/aufgabe-d/main.cpp}
	
	
	
	
	%literatur,abbildungsverzeichnis etc.
	\newpage
	\printbibliography
	\listoffigures
	\listoftables
	
\end{document}

